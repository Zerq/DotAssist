{"version":3,"file":"Guid.js","sourceRoot":"","sources":["../../../src/home/Guid.ts"],"names":[],"mappings":"AAAA,0FAA0F;AAC1F,+EAA+E;AAC/E,6GAA6G;AAC7G,0DAA0D;AAC1D,MAAM,OAAO,IAAK,SAAQ,MAAM;IAErB,MAAM,CAAC,aAAa;QACvB,SAAS,EAAE;YAEP,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,KAAK,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;QAC7E,CAAC;QACD,OAAO,CACH,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,CAChF,CAAC;IACN,CAAC;IACD,YAA4B,GAAW;QACnC,KAAK,EAAE,CAAC;QADgB,QAAG,GAAH,GAAG,CAAQ;IAEvC,CAAC;IAGM,MAAM,CAAC,OAAO,CAAC,KAAa;QAC/B,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,CAAC,mBAAmB;QACtD,OAAO,KAAK,CAAC,MAAM,KAAK,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/D,CAAC;IAEM,MAAM,CAAC,OAAO,CAAC,KAAc;QAChC,IAAI,CAAC,KAAK,EAAE,CAAC;YACT,IAAI,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YACzC,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC,wDAAwD;gBAC/F,aAAa,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;YACzC,CAAC;YAED,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,aAAa,CAAC,CAAC;YACxC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YACxC,OAAO,OAAO,CAAC;QACnB,CAAC;QAED,IAAI,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;YAC5D,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;YACxC,OAAO,OAAO,CAAC;QACnB,CAAC;QAED,IAAI,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;YAC3D,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC;QAED,MAAM,IAAI,KAAK,CAAC,KAAK,GAAG,sBAAsB,CAAC,CAAC;IAEpD,CAAC;IAEQ,QAAQ;QACb,OAAO,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC;;AAhDc,aAAQ,GAAsB,IAAI,GAAG,EAAE,CAAC;AAcxC,UAAK,GAAG,CAAC,EAAU,EAAE,EAAE,CAAC,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC","sourcesContent":["//yes this is a very silly idea... i was coding late at night.... it probably not wise lol\r\n//but fuck you! I want a guid that a guid and never anything other then a guid!\r\n//hopefully that ecmascript proposal for immutables might make this insanity a bit more sensible in future...\r\n//anyway permit me some lunacy! its my own bloody project!\r\nexport class Guid extends String {\r\n    private static AllGuids: Map<string, Guid> = new Map();\r\n    public static NewGuidString(): string {\r\n        function s4() {\r\n\r\n            return Math.floor((1 + Math.random()) * 65536).toString(16).substring(1);\r\n        }\r\n        return (\r\n            s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4()\r\n        );\r\n    }\r\n    private constructor(private val: string) {\r\n        super();\r\n    }\r\n\r\n    private static isHEX = (ch: string) => \"0123456789abcdef\".includes(ch.toLowerCase());\r\n    public static IsValid(value: string): boolean {\r\n        value = value.replaceAll(\"-\", \"\"); // Format it first!\r\n        return value.length === 32 && [...value].every(Guid.isHEX);\r\n    }\r\n\r\n    public static NewGuid(value?: string) {\r\n        if (!value) {\r\n            let newGuidString = this.NewGuidString();\r\n            while (this.AllGuids.has(newGuidString)) { //might as well ensure guid collisions are impossible :p\r\n                newGuidString = this.NewGuidString();\r\n            }\r\n\r\n            const newGuid = new Guid(newGuidString);\r\n            Guid.AllGuids.set(newGuid.val, newGuid);\r\n            return newGuid;\r\n        }\r\n\r\n        if (value && this.IsValid(value) && !Guid.AllGuids.has(value)) {\r\n            const newGuid = new Guid(value);\r\n            Guid.AllGuids.set(newGuid.val, newGuid);\r\n            return newGuid;\r\n        }\r\n\r\n        if (value && this.IsValid(value) && Guid.AllGuids.has(value)) {\r\n            return Guid.AllGuids.get(value);\r\n        }\r\n\r\n        throw new Error(value + \" is not a valid Guid\");\r\n\r\n    }\r\n\r\n    override toString() {\r\n        return this.val;\r\n    }\r\n}\r\n"]}